МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ
ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ



КАФЕДРА ПРОГРАМНОЇ ІНЖЕНЕРІЇ






Звіт
з лабораторної роботи № 5
з дисципліни
«Аналіз та рефакторинг коду»









Виконав:	Перевірив:
ст. гр. ПЗПІ-23-5	ст. викладач кафедри ПІ
Висоцький І. О.	Сокорчук Ігор Петрович












2025

1 ІСТОРІЯ ЗМІН
№ДатаВерсія звітуОпис змін та виправлень126.12.20250.1Створено розділ "Опис виконаної роботи"
      



     2 ЗАВДАННЯ
     1. Розгорнути створену програмну систему (Backend, Frontend, IoT, БД) 
     2. Налаштувати середовище для роботи програмної системи 
     3. Перевірити та налаштувати роботу розгорнутої системи 
     4. Продемонструвати функціональність, описану в Vision & Scope 
     5. Створити відеозапис демонстрації (7-9 хвилин) 
     6. Створити звіт та завантажити його на dl.nure.ua та GitHub

     3 ОПИС ВИКОНАНОЇ РОБОТИ
     3.1 -скрипт розгортання
     Розроблений -скрипт deploy.sh автоматизує розгортання Backend системи. Скрипт складається з 6 послідовних кроків.
     3.1.1 Крок 1: Перевірка окруження
     Скрипт перевіряє наявність Java, Maven та Git:
     
check_command() {
    command -v "$1" &>/dev/null
}

print_info "Checking Java..."
if check_command java; then
    print_success "Java found: $(java -version 2>&1 | head -n 1)"
else
    print_error "Java not found (Java 21+ required)"
    exit 1
fi

check_command mvn
check_command git
     Результат: ✅ Java 21, Maven 3.9.6, Git знайдені
     3.1.2 Крок 2: Конфігурація Neon БД
     
NEON_HOST="ep-wandering-mountain-aghgpzun-pooler.c-2.eu-central-1.aws.neon.tech"
NEON_USER="neondb_owner"
NEON_DB="neondb"

read -s -p "Enter Neon DB password: " DB_PASSWORD
export DB_PASSWORD

# Перевірка підключення
PGPASSWORD="$DB_PASSWORD" psql -h "$NEON_HOST" \
    -U "$NEON_USER" -d "$NEON_DB" \
    -c "SELECT 1;"
     Результат: ✅ Успішне підключення до PostgreSQL 15 на Neon
     3.1.3 Крок 3-4: Підготовка та очистка
     
cd polls-backend

# Очистка старих артефактів
mvn clean -q

# Завантаження залежностей
mvn dependency:resolve -q
     Результат: ✅ Завантажено 250+ залежностей
     3.1.4 Крок 5: Компіляція Backend
     
mvn clean install -DskipTests -q

# Пошук JAR файлу (без hardcoded імені)
JAR_FILE=$(ls target/*.jar 2>/dev/null | grep -v original | head -n 1)
JAR_SIZE=$(du -h "$JAR_FILE" | cut -f1)
print_success "JAR created: $JAR_FILE ($JAR_SIZE)"
Результат: ✅ JAR успішно зібраний (48.7 MB)
3.1.5 Крок 6: Запуск Backend

read -p "Start backend now? (y/n): " START_NOW

if [ "$START_NOW" = "y" ]; then
    mvn spring-boot:run \
        -Dspring-boot.run.arguments="--spring.datasource.password=$DB_PASSWORD"
fi
     Результат:
     Tomcat started on port(s): 8080
     Application ready to serve requests in 7.768s
     ✅ Backend готовий на http://localhost:8080
     3.2 Особливості скрипта
     Особливість     Опис     set -e     Вихід при будь-якій помилці     Кольорові повідомлення     ✅ ❌ ⚠️ ℹ️ для зручності     Вхід паролю     read -s (приховує введення)     Динамічний пошук JAR     Не залежить від імені файлу     Опціональна перевірка БД     Продовжує роботу при помилці     Інтерактивний запуск     Питає перед запуском     3.3 Тестування
     3.3.1 Успішне розгортання
     Крок     Статус     Час     Перевірка окруження     ✅     0.2s     Конфіг БД     ✅     0.5s     Очистка + залежності     ✅     2m45s     Компіляція     ✅     4m30s     Запуск     ✅     7.7s     Загальний час: ~10 хвилин
     3.3.2 Перевірка API
     
     # Swagger UI
     curl http://localhost:8080/swagger-ui.html
     # 200 OK ✅
     
     # Health check
     curl http://localhost:8080/actuator/health
     # {"status":"UP"} ✅
     
     
     
     4 ГРАФІЧНІ ІЛЮСТРАЦІЇ
     4.1 Опис діаграм
     Рисунок Б.1 — Архітектура розгортання
     Діаграма показує архітектуру системи:
     • Developer Machine запускає bash-скрипт
     • Maven Build System компілює проект (clean → dependencies → install)
     • Залежності завантажуються з Maven Repo
     • Готовий JAR запускається у Spring Boot (Tomcat на 8080)
     • Spring Boot з'єднується з Neon PostgreSQL через JDBC
     Рисунок Б.2 — Життєвий цикл розгортання
     Діаграма показує послідовність 6 кроків:
     1. Перевірка Java, Maven, Git (🔴 помилка → стоп)
     2. Конфіг Neon БД (🟡 попередження → продовжує)
     3. Перехід у папку Backend
     4. Maven clean + dependency:resolve
     5. Maven clean install (🔴 помилка → стоп)
     6. Запуск Backend на 8080 (✅ завершено)
     Кожне рішення колірне закодовано: зелене = успіх, червоне = помилка, жовте = попередження
     


     4 ВИСНОВКИ
     Bash-скрипт deploy.sh успішно автоматизує розгортання Backend:
     ✅ Крок 1: Перевірка Java/Maven/Git
     ✅ Крок 2: Конфіг Neon PostgreSQL
     ✅ Крок 3-4: Очистка та залежності
     ✅ Крок 5: Компіляція Backend
     ✅ Крок 6: Запуск на http://localhost:8080
     Загальний час: ~10 хвилин від старту до готовності.
     Система повністю готова до тестування та інтеграції з клієнтами.
     

     ДОДАТОК А
     ВІДЕОЗАПИС
     https://www.youtube.com/watch?v=utTq7ShyJd8
     Хронологічний опис відеозапису:
     00:00 - Представлення
     00:14 - Завдання, яке потрібно було виконати
     00:14 - Початковий стан системи
     01:00 - Початок розгортання системи
     01:11 - Запуск скрипту розгортання 
     02:05 - Демонстрація роботи свагеру
     02:10 - Демонстрація роботи api 
     02:39 - Перевірка бази даних
     04:45 - Тестування IoT клієнта
     05:53 - Вимкнення серверу

ДОДАТОК Б
Графічні матеріали

Рисунок Б.1 — Архітектура розгортання системи


Рисунок Б.2 — Життєвий цикл розгортання


